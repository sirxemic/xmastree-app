var M=Object.defineProperty;var L=(x,e,t)=>e in x?M(x,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):x[e]=t;var s=(x,e,t)=>(L(x,typeof e!="symbol"?e+"":e,t),t);import{C as k,V as l,B as v,S as F,P as T,O as E,a as u,W as N,b as P,c as B,E as R,F as A,I as D,L as O,M as U,d as $,e as j,f as q,Q as I,R as V,g as _,h as G,T as Q,i as W,j as H,k as K,l as b,D as X,m as J,n as Y,o as Z,A as e0,p as w}from"./vendor.cc71fe14.js";const t0=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))y(r);new MutationObserver(r=>{for(const z of r)if(z.type==="childList")for(const o of z.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&y(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const z={};return r.integrity&&(z.integrity=r.integrity),r.referrerpolicy&&(z.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?z.credentials="include":r.crossorigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function y(r){if(r.ep)return;r.ep=!0;const z=t(r);fetch(r.href,z)}};t0();class r0{constructor(){s(this,"editor");const e=document.querySelector("textarea");this.editor=k.fromTextArea(e,{mode:"javascript",theme:"solarized dark",lineNumbers:!0,lineWrapping:!0,viewportMargin:1/0})}setCode(e){this.editor.setValue(e)}getCode(){return this.editor.getValue()}addEventListener(e,t){this.editor.on(e,t)}}var y0=[{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.547169811,y:-.173584906,z:.698113208},{x:.362264151,y:-.188679245,z:.520754717},{x:.343396226,y:-.464150943,z:.347169811},{x:.267924528,y:-.441509434,z:.58490566},{x:.305660377,y:-.464150943,z:.581132075},{x:.347169811,y:-.490566038,z:.577358491},{x:.388679245,y:-.513207547,z:.573584906},{x:.430188679,y:-.539622642,z:.569811321},{x:.471698113,y:-.566037736,z:.562264151},{x:.550943396,y:-.833962264,z:.479245283},{x:.509433962,y:-.924528302,z:.645283019},{x:.532075472,y:-.905660377,z:.396226415},{x:.509433962,y:-.901886792,z:.4},{x:.486792453,y:-.901886792,z:.403773585},{x:.464150943,y:-.901886792,z:.40754717},{x:.441509434,y:-.901886792,z:.411320755},{x:.418867925,y:-.901886792,z:.41509434},{x:.396226415,y:-.901886792,z:.418867925},{x:.373584906,y:-.901886792,z:.422641509},{x:.350943396,y:-.901886792,z:.426415094},{x:.332075472,y:-.901886792,z:.430188679},{x:.309433962,y:-.901886792,z:.433962264},{x:.286792453,y:-.901886792,z:.437735849},{x:.264150943,y:-.901886792,z:.441509434},{x:.241509434,y:-.901886792,z:.445283019},{x:.218867925,y:-.901886792,z:.449056604},{x:.196226415,y:-.901886792,z:.452830189},{x:.173584906,y:-.901886792,z:.456603774},{x:.154716981,y:-.901886792,z:.460377358},{x:.132075472,y:-.901886792,z:.464150943},{x:.109433962,y:-.901886792,z:.467924528},{x:.086792453,y:-.901886792,z:.471698113},{x:.067924528,y:-.901886792,z:.475471698},{x:.045283019,y:-.901886792,z:.479245283},{x:.022641509,y:-.901886792,z:.483018868},{x:0,y:-.901886792,z:.486792453},{x:-.022641509,y:-.901886792,z:.486792453},{x:-.030188679,y:-.920754717,z:.245283019},{x:.083018868,y:-.811320755,z:.396226415},{x:.056603774,y:-.78490566,z:.4},{x:.030188679,y:-.762264151,z:.4},{x:.003773585,y:-.739622642,z:.4},{x:-.022641509,y:-.716981132,z:.4},{x:-.049056604,y:-.694339623,z:.4},{x:-.075471698,y:-.671698113,z:.4},{x:-.101886792,y:-.649056604,z:.4},{x:-.128301887,y:-.626415094,z:.4},{x:-.154716981,y:-.603773585,z:.4},{x:-.181132075,y:-.581132075,z:.4},{x:-.20754717,y:-.558490566,z:.4},{x:-.233962264,y:-.535849057,z:.403773585},{x:-.260377358,y:-.513207547,z:.403773585},{x:-.286792453,y:-.490566038,z:.403773585},{x:-.313207547,y:-.467924528,z:.403773585},{x:-.339622642,y:-.445283019,z:.403773585},{x:-.366037736,y:-.422641509,z:.403773585},{x:-.39245283,y:-.4,z:.403773585},{x:-.418867925,y:-.377358491,z:.403773585},{x:-.445283019,y:-.354716981,z:.403773585},{x:-.471698113,y:-.332075472,z:.403773585},{x:-.498113208,y:-.309433962,z:.403773585},{x:-.41509434,y:-.196226415,z:.562264151},{x:-.343396226,y:-.222641509,z:.241509434},{x:-.343396226,y:-.275471698,z:.509433962},{x:-.347169811,y:-.120754717,z:.41509434},{x:-.403773585,y:-.120754717,z:.4},{x:-.464150943,y:-.120754717,z:.38490566},{x:-.524528302,y:-.120754717,z:.366037736},{x:-.58490566,y:-.124528302,z:.350943396},{x:-.645283019,y:-.124528302,z:.332075472},{x:-.701886792,y:-.124528302,z:.316981132},{x:-.762264151,y:-.128301887,z:.301886792},{x:-.822641509,y:-.128301887,z:.283018868},{x:-.883018868,y:-.128301887,z:.267924528},{x:-.943396226,y:-.132075472,z:.249056604},{x:-.826415094,y:-.060377358,z:.011320755},{x:-.875471698,y:-.120754717,z:.275471698},{x:-.864150943,y:-.083018868,z:.294339623},{x:-.852830189,y:-.045283019,z:.313207547},{x:-.841509434,y:-.01509434,z:.328301887},{x:-.830188679,y:.022641509,z:.347169811},{x:-.818867925,y:.056603774,z:.366037736},{x:-.80754717,y:.094339623,z:.381132075},{x:-.796226415,y:.128301887,z:.4},{x:-.78490566,y:.166037736,z:.41509434},{x:-.773584906,y:.2,z:.433962264},{x:-.762264151,y:.237735849,z:.452830189},{x:-.750943396,y:.271698113,z:.467924528},{x:-.739622642,y:.309433962,z:.486792453},{x:-.728301887,y:.347169811,z:.501886792},{x:-.773584906,y:.154716981,z:.267924528},{x:-.886792453,y:.316981132,z:.2},{x:-1,y:.581132075,z:.343396226},{x:-.916981132,y:.603773585,z:.105660377},{x:-.788679245,y:.316981132,z:.109433962},{x:-.569811321,y:.445283019,z:.283018868},{x:-.618867925,y:.475471698,z:.162264151},{x:-.6,y:.486792453,z:.177358491},{x:-.58490566,y:.501886792,z:.19245283},{x:-.569811321,y:.516981132,z:.20754717},{x:-.550943396,y:.528301887,z:.222641509},{x:-.535849057,y:.543396226,z:.237735849},{x:-.520754717,y:.558490566,z:.252830189},{x:-.505660377,y:.573584906,z:.264150943},{x:-.713207547,y:.664150943,z:.433962264},{x:-.562264151,y:.437735849,z:.652830189},{x:-.630188679,y:.626415094,z:.905660377},{x:-.516981132,y:.38490566,z:1.049056604},{x:-.698113208,y:.490566038,z:1.150943396},{x:-.418867925,y:.41509434,z:1.260377358},{x:-.596226415,y:.4,z:1.301886792},{x:-.566037736,y:.309433962,z:1.196226415},{x:-.539622642,y:.222641509,z:1.090566038},{x:-.471698113,y:.279245283,z:1.188679245},{x:-.267924528,y:.026415094,z:1.154716981},{x:-.267924528,y:.030188679,z:1.162264151},{x:-.267924528,y:.033962264,z:1.166037736},{x:-.271698113,y:.037735849,z:1.169811321},{x:-.271698113,y:.041509434,z:1.173584906},{x:-.275471698,y:.045283019,z:1.181132075},{x:-.275471698,y:.049056604,z:1.18490566},{x:-.279245283,y:.052830189,z:1.188679245},{x:-.279245283,y:.056603774,z:1.19245283},{x:-.283018868,y:.060377358,z:1.196226415},{x:-.056603774,y:.030188679,z:1.377358491},{x:-.188679245,y:-.124528302,z:1.249056604},{x:-.226415094,y:-.003773585,z:1.2},{x:-.230188679,y:.079245283,z:1.116981132},{x:-.233962264,y:.166037736,z:1.033962264},{x:-.241509434,y:.252830189,z:.947169811},{x:-.245283019,y:.339622642,z:.864150943},{x:-.249056604,y:.422641509,z:.781132075},{x:-.256603774,y:.509433962,z:.694339623},{x:-.260377358,y:.596226415,z:.611320755},{x:-.267924528,y:.683018868,z:.524528302},{x:-.426415094,y:.909433962,z:.516981132},{x:-.305660377,y:.920754717,z:.222641509},{x:-.279245283,y:.909433962,z:.218867925},{x:-.256603774,y:.901886792,z:.21509434},{x:-.230188679,y:.890566038,z:.211320755},{x:-.20754717,y:.883018868,z:.203773585},{x:-.18490566,y:.871698113,z:.2},{x:-.158490566,y:.864150943,z:.196226415},{x:-.135849057,y:.852830189,z:.188679245},{x:-.109433962,y:.845283019,z:.18490566},{x:-.086792453,y:.833962264,z:.181132075},{x:-.064150943,y:.826415094,z:.173584906},{x:-.037735849,y:.81509434,z:.169811321},{x:-.01509434,y:.80754717,z:.166037736},{x:.011320755,y:.8,z:.158490566},{x:.033962264,y:.788679245,z:.154716981},{x:.056603774,y:.781132075,z:.150943396},{x:.079245283,y:.769811321,z:.143396226},{x:.101886792,y:.762264151,z:.139622642},{x:.128301887,y:.750943396,z:.135849057},{x:.150943396,y:.743396226,z:.132075472},{x:.177358491,y:.732075472,z:.124528302},{x:.2,y:.724528302,z:.120754717},{x:.222641509,y:.713207547,z:.116981132},{x:.249056604,y:.705660377,z:.109433962},{x:.271698113,y:.698113208,z:.105660377},{x:.298113208,y:.686792453,z:.101886792},{x:.320754717,y:.679245283,z:.094339623},{x:.343396226,y:.667924528,z:.090566038},{x:.369811321,y:.660377358,z:.086792453},{x:.39245283,y:.649056604,z:.079245283},{x:.418867925,y:.641509434,z:.075471698},{x:.441509434,y:.630188679,z:.071698113},{x:.464150943,y:.622641509,z:.064150943},{x:.490566038,y:.611320755,z:.060377358},{x:.513207547,y:.603773585,z:.056603774},{x:.539622642,y:.596226415,z:.049056604},{x:.433962264,y:.4,z:.169811321},{x:.577358491,y:.362264151,z:.041509434},{x:.577358491,y:.305660377,z:.030188679},{x:.550943396,y:.264150943,z:.064150943},{x:.524528302,y:.226415094,z:.094339623},{x:.501886792,y:.18490566,z:.124528302},{x:.475471698,y:.147169811,z:.154716981},{x:.449056604,y:.105660377,z:.18490566},{x:.426415094,y:.067924528,z:.21509434},{x:.547169811,y:.064150943,z:.411320755},{x:.403773585,y:-.022641509,z:.456603774},{x:.188679245,y:.075471698,z:.222641509},{x:.339622642,y:.132075472,z:.113207547},{x:.490566038,y:.19245283,z:0},{x:.59245283,y:.249056604,z:.150943396},{x:.660377358,y:.324528302,z:.2},{x:.660377358,y:.335849057,z:.290566038},{x:.675471698,y:.169811321,z:.456603774},{x:.743396226,y:.18490566,z:.449056604},{x:.81509434,y:.203773585,z:.437735849},{x:.886792453,y:.218867925,z:.430188679},{x:.958490566,y:.237735849,z:.418867925},{x:.811320755,y:.196226415,z:.60754717},{x:.750943396,y:.158490566,z:.573584906},{x:.622641509,y:0,z:.637735849},{x:.535849057,y:.052830189,z:.728301887},{x:.441509434,y:-.079245283,z:.977358491},{x:.411320755,y:.116981132,z:1.011320755},{x:.305660377,y:.113207547,z:1.188679245},{x:.39245283,y:.20754717,z:1.203773585},{x:.483018868,y:.301886792,z:1.218867925},{x:.637735849,y:.328301887,z:.928301887},{x:.532075472,y:.332075472,z:1.105660377},{x:.558490566,y:.067924528,z:1.245283019},{x:.524528302,y:.098113208,z:1.143396226},{x:.494339623,y:.128301887,z:1.041509434},{x:.464150943,y:.158490566,z:.935849057},{x:.550943396,y:.056603774,z:.811320755},{x:.501886792,y:.256603774,z:.99245283},{x:.641509434,y:.535849057,z:.826415094},{x:.649056604,y:.362264151,z:.905660377},{x:.656603774,y:.188679245,z:.98490566},{x:.747169811,y:.18490566,z:.656603774},{x:.581132075,y:.362264151,z:.558490566},{x:.766037736,y:.449056604,z:.61509434},{x:.954716981,y:.535849057,z:.667924528},{x:.716981132,y:.550943396,z:.750943396},{x:.920754717,y:.581132075,z:.958490566},{x:.762264151,y:.532075472,z:1.022641509},{x:.954716981,y:.350943396,z:.849056604},{x:.947169811,y:.324528302,z:.943396226},{x:.939622642,y:.298113208,z:1.037735849},{x:.932075472,y:.271698113,z:1.132075472},{x:.924528302,y:.245283019,z:1.226415094},{x:.935849057,y:-.071698113,z:1.222641509},{x:1,y:-.00754717,z:1.430188679},{x:.867924528,y:-.230188679,z:1.494339623},{x:.758490566,y:-.362264151,z:1.467924528},{x:.762264151,y:-.290566038,z:1.520754717},{x:.766037736,y:-.218867925,z:1.573584906},{x:.769811321,y:-.150943396,z:1.626415094},{x:.773584906,y:-.079245283,z:1.679245283},{x:.777358491,y:-.011320755,z:1.735849057},{x:.679245283,y:.158490566,z:1.928301887},{x:.486792453,y:.105660377,z:1.860377358},{x:.460377358,y:.139622642,z:1.79245283},{x:.433962264,y:.173584906,z:1.728301887},{x:.411320755,y:.20754717,z:1.664150943},{x:.38490566,y:.241509434,z:1.6},{x:.358490566,y:.275471698,z:1.532075472},{x:.335849057,y:.309433962,z:1.467924528},{x:.309433962,y:.343396226,z:1.403773585},{x:.286792453,y:.381132075,z:1.339622642},{x:.339622642,y:.554716981,z:1.516981132},{x:.369811321,y:.309433962,z:1.528301887},{x:.569811321,y:.449056604,z:1.313207547},{x:.516981132,y:.532075472,z:1.150943396},{x:.611320755,y:.41509434,z:1.113207547},{x:.4,y:.524528302,z:1.00754717},{x:.596226415,y:.475471698,z:.977358491},{x:.528301887,y:.494339623,z:1.00754717},{x:.460377358,y:.513207547,z:1.037735849},{x:.39245283,y:.535849057,z:1.067924528},{x:.324528302,y:.554716981,z:1.098113208},{x:.256603774,y:.577358491,z:1.124528302},{x:.188679245,y:.596226415,z:1.154716981},{x:.120754717,y:.61509434,z:1.18490566},{x:.052830189,y:.637735849,z:1.211320755},{x:-.01509434,y:.656603774,z:1.241509434},{x:-.083018868,y:.679245283,z:1.271698113},{x:-.026415094,y:.547169811,z:1.045283019},{x:-.101886792,y:.79245283,z:1.00754717},{x:.139622642,y:.747169811,z:.871698113},{x:.116981132,y:.773584906,z:1},{x:.094339623,y:.8,z:1.124528302},{x:.2,y:.875471698,z:.966037736},{x:-.011320755,y:.8,z:1},{x:-.071698113,y:.822641509,z:.671698113},{x:-.226415094,y:.8,z:.901886792},{x:-.211320755,y:.664150943,z:.803773585},{x:-.030188679,y:.81509434,z:.698113208},{x:-.075471698,y:.79245283,z:.709433962},{x:-.120754717,y:.769811321,z:.716981132},{x:-.166037736,y:.750943396,z:.724528302},{x:-.211320755,y:.728301887,z:.735849057},{x:-.256603774,y:.709433962,z:.743396226},{x:-.301886792,y:.686792453,z:.750943396},{x:-.347169811,y:.667924528,z:.758490566},{x:-.39245283,y:.645283019,z:.769811321},{x:-.437735849,y:.626415094,z:.777358491},{x:-.483018868,y:.603773585,z:.78490566},{x:-.528301887,y:.58490566,z:.79245283},{x:-.573584906,y:.562264151,z:.803773585},{x:-.618867925,y:.543396226,z:.811320755},{x:-.664150943,y:.520754717,z:.818867925},{x:-.713207547,y:.501886792,z:.826415094},{x:-.698113208,y:.467924528,z:.788679245},{x:-.675471698,y:.550943396,z:.969811321},{x:-.660377358,y:.347169811,z:.969811321},{x:-.645283019,y:.147169811,z:.966037736},{x:-.630188679,y:-.049056604,z:.966037736},{x:-.61509434,y:-.252830189,z:.962264151},{x:-.456603774,y:-.00754717,z:.845283019},{x:-.588679245,y:-.105660377,z:.852830189},{x:-.464150943,y:-.00754717,z:.928301887},{x:-.513207547,y:-.071698113,z:.958490566},{x:-.566037736,y:-.139622642,z:.988679245},{x:-.618867925,y:-.20754717,z:1.018867925},{x:-.671698113,y:-.271698113,z:1.049056604},{x:-.724528302,y:-.339622642,z:1.079245283},{x:-.777358491,y:-.40754717,z:1.109433962},{x:-.830188679,y:-.471698113,z:1.139622642},{x:-.883018868,y:-.539622642,z:1.169811321},{x:-.935849057,y:-.60754717,z:1.2},{x:-.781132075,y:-.403773585,z:1.196226415},{x:-.781132075,y:-.475471698,z:.894339623},{x:-.641509434,y:-.479245283,z:.962264151},{x:-.501886792,y:-.483018868,z:1.030188679},{x:-.362264151,y:-.486792453,z:1.098113208},{x:-.222641509,y:-.490566038,z:1.166037736},{x:-.086792453,y:-.498113208,z:1.233962264},{x:-.154716981,y:-.381132075,z:1.252830189},{x:-.305660377,y:-.411320755,z:1.513207547},{x:-.20754717,y:-.445283019,z:1.430188679},{x:-.109433962,y:-.479245283,z:1.350943396},{x:-.011320755,y:-.513207547,z:1.271698113},{x:.086792453,y:-.547169811,z:1.196226415},{x:.18490566,y:-.58490566,z:1.113207547},{x:.086792453,y:-.709433962,z:.905660377},{x:.2,y:-.720754717,z:.939622642},{x:.245283019,y:-.867924528,z:.973584906},{x:.403773585,y:-.864150943,z:.920754717},{x:.260377358,y:-.720754717,z:.98490566},{x:.283018868,y:-.675471698,z:.98490566},{x:.309433962,y:-.630188679,z:.98490566},{x:.335849057,y:-.588679245,z:.98490566},{x:.362264151,y:-.543396226,z:.981132075},{x:.388679245,y:-.498113208,z:.981132075},{x:.41509434,y:-.456603774,z:.981132075},{x:.441509434,y:-.411320755,z:.981132075},{x:.467924528,y:-.369811321,z:.977358491},{x:.618867925,y:-.498113208,z:1.011320755},{x:.705660377,y:-.520754717,z:.954716981},{x:.769811321,y:-.449056604,z:.950943396},{x:.833962264,y:-.381132075,z:.947169811},{x:.630188679,y:-.362264151,z:1.011320755},{x:.788679245,y:-.618867925,z:1.098113208},{x:.61509434,y:-.524528302,z:.894339623},{x:.59245283,y:-.516981132,z:1.041509434},{x:.464150943,y:-.675471698,z:.973584906},{x:.588679245,y:-.520754717,z:1.00754717},{x:.373584906,y:-.433962264,z:1.098113208},{x:.520754717,y:-.626415094,z:1.196226415},{x:.373584906,y:-.543396226,z:1.256603774},{x:.377358491,y:-.535849057,z:1.286792453},{x:.38490566,y:-.528301887,z:1.320754717},{x:.388679245,y:-.520754717,z:1.350943396},{x:.396226415,y:-.516981132,z:1.38490566},{x:.4,y:-.509433962,z:1.41509434},{x:.40754717,y:-.501886792,z:1.449056604},{x:.411320755,y:-.494339623,z:1.483018868},{x:.418867925,y:-.490566038,z:1.513207547},{x:.426415094,y:-.483018868,z:1.547169811},{x:.430188679,y:-.475471698,z:1.577358491},{x:.437735849,y:-.467924528,z:1.611320755},{x:.441509434,y:-.464150943,z:1.645283019},{x:.449056604,y:-.456603774,z:1.675471698},{x:.452830189,y:-.449056604,z:1.709433962},{x:.460377358,y:-.441509434,z:1.739622642},{x:.464150943,y:-.437735849,z:1.773584906},{x:.471698113,y:-.430188679,z:1.80754717},{x:.479245283,y:-.422641509,z:1.837735849},{x:.483018868,y:-.41509434,z:1.871698113},{x:.490566038,y:-.411320755,z:1.901886792},{x:.494339623,y:-.403773585,z:1.935849057},{x:.501886792,y:-.396226415,z:1.969811321},{x:.505660377,y:-.388679245,z:2},{x:.513207547,y:-.38490566,z:2.033962264},{x:.516981132,y:-.377358491,z:2.064150943},{x:.524528302,y:-.369811321,z:2.098113208},{x:.532075472,y:-.366037736,z:2.132075472},{x:.298113208,y:-.39245283,z:1.909433962},{x:.230188679,y:-.573584906,z:1.920754717},{x:.290566038,y:-.543396226,z:1.852830189},{x:.354716981,y:-.513207547,z:1.78490566},{x:.41509434,y:-.483018868,z:1.716981132},{x:.479245283,y:-.452830189,z:1.649056604},{x:.441509434,y:-.611320755,z:1.603773585},{x:.532075472,y:-.39245283,z:1.543396226},{x:.475471698,y:-.354716981,z:1.667924528},{x:.422641509,y:-.320754717,z:1.79245283},{x:.369811321,y:-.286792453,z:1.920754717},{x:.313207547,y:-.249056604,z:2.045283019},{x:.260377358,y:-.21509434,z:2.169811321},{x:.20754717,y:-.181132075,z:2.298113208},{x:.071698113,y:-.366037736,z:2.471698113},{x:.354716981,y:-.294339623,z:2.622641509},{x:.354716981,y:-.369811321,z:2.622641509},{x:.264150943,y:-.188679245,z:2.675471698},{x:.298113208,y:-.260377358,z:2.456603774},{x:-.003773585,y:-.422641509,z:2.916981132},{x:-.071698113,y:-.339622642,z:2.762264151},{x:.071698113,y:-.377358491,z:2.916981132},{x:.124528302,y:-.279245283,z:2.875471698},{x:.177358491,y:-.181132075,z:2.837735849},{x:.101886792,y:-.124528302,z:2.935849057},{x:.147169811,y:-.249056604,z:3.218867925},{x:-.00754717,y:-.083018868,z:3.233962264},{x:.083018868,y:-.147169811,z:3.003773585},{x:-.01509434,y:-.022641509,z:3.045283019},{x:.075471698,y:-.18490566,z:2.781132075},{x:-.158490566,y:-.071698113,z:2.762264151},{x:-.139622642,y:-.128301887,z:2.641509434},{x:-.139622642,y:-.377358491,z:2.61509434},{x:-.275471698,y:-.411320755,z:2.58490566},{x:-.218867925,y:-.328301887,z:2.252830189},{x:-.21509434,y:-.135849057,z:2.252830189},{x:-.332075472,y:-.286792453,z:2.264150943},{x:-.550943396,y:-.430188679,z:2.086792453},{x:-.324528302,y:-.181132075,z:2.026415094},{x:-.373584906,y:-.173584906,z:1.958490566},{x:-.422641509,y:-.166037736,z:1.890566038},{x:-.471698113,y:-.158490566,z:1.822641509},{x:-.524528302,y:-.150943396,z:1.758490566},{x:-.573584906,y:-.143396226,z:1.690566038},{x:-.622641509,y:-.135849057,z:1.622641509},{x:-.675471698,y:-.128301887,z:1.558490566},{x:-.498113208,y:.060377358,z:1.664150943},{x:-.667924528,y:.188679245,z:1.452830189},{x:-.618867925,y:.313207547,z:1.558490566},{x:-.569811321,y:.437735849,z:1.664150943},{x:-.339622642,y:.267924528,z:1.679245283},{x:-.049056604,y:.354716981,z:1.596226415},{x:-.071698113,y:.335849057,z:1.675471698},{x:-.094339623,y:.316981132,z:1.754716981},{x:-.116981132,y:.298113208,z:1.833962264},{x:-.139622642,y:.279245283,z:1.913207547},{x:-.162264151,y:.260377358,z:1.99245283},{x:-.18490566,y:.241509434,z:2.071698113},{x:-.20754717,y:.226415094,z:2.154716981},{x:-.011320755,y:.211320755,z:2.350943396},{x:.116981132,y:.098113208,z:2.516981132},{x:-.147169811,y:.049056604,z:2.550943396},{x:.154716981,y:.075471698,z:2.671698113},{x:.064150943,y:-.037735849,z:2.901886792},{x:.211320755,y:.188679245,z:2.849056604},{x:.166037736,y:-.052830189,z:2.935849057},{x:.332075472,y:-.022641509,z:2.890566038},{x:.279245283,y:-.154716981,z:2.679245283},{x:.222641509,y:-.124528302,z:2.479245283},{x:.309433962,y:.086792453,z:2.60754717},{x:.279245283,y:.135849057,z:2.547169811},{x:.252830189,y:.188679245,z:2.486792453},{x:.222641509,y:.237735849,z:2.430188679},{x:.196226415,y:.290566038,z:2.369811321},{x:.169811321,y:.343396226,z:2.309433962},{x:.139622642,y:.39245283,z:2.252830189},{x:.113207547,y:.445283019,z:2.19245283},{x:.086792453,y:.498113208,z:2.132075472},{x:.060377358,y:.547169811,z:2.075471698},{x:.033962264,y:.6,z:2.01509434},{x:.003773585,y:.652830189,z:1.958490566},{x:.196226415,y:.709433962,z:1.901886792},{x:.332075472,y:.550943396,z:1.611320755},{x:.441509434,y:.554716981,z:1.656603774},{x:.377358491,y:.550943396,z:1.686792453},{x:.566037736,y:.581132075,z:1.996226415},{x:.479245283,y:.490566038,z:1.996226415},{x:.294339623,y:.335849057,z:1.996226415},{x:.18490566,y:.218867925,z:2.098113208},{x:.241509434,y:.203773585,z:2.049056604},{x:.301886792,y:.19245283,z:2},{x:.358490566,y:.181132075,z:1.954716981},{x:.418867925,y:.169811321,z:1.905660377},{x:.475471698,y:.158490566,z:1.856603774},{x:.535849057,y:.147169811,z:1.811320755},{x:.59245283,y:.135849057,z:1.762264151},{x:.652830189,y:.124528302,z:1.713207547},{x:.713207547,y:.113207547,z:1.667924528},{x:.698113208,y:-.143396226,z:1.664150943},{x:.641509434,y:-.033962264,z:1.724528302},{x:.645283019,y:-.294339623,z:1.883018868},{x:.573584906,y:-.226415094,z:1.894339623},{x:.505660377,y:-.162264151,z:1.909433962},{x:.433962264,y:-.094339623,z:1.920754717},{x:.366037736,y:-.030188679,z:1.935849057},{x:.396226415,y:-.033962264,z:2.079245283},{x:.2,y:-.120754717,z:2.267924528},{x:.433962264,y:-.271698113,z:2.335849057},{x:.433962264,y:-.271698113,z:2.335849057}];const x0=`
varying vec3 vColor;
void main() {
  vColor = color;
  vec3 mPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  float d = dot(normalize(mPosition.xy), normalize(cameraPosition.xy));
  float sizeMultiplier = 250.0;
  if (d < 0.0) sizeMultiplier *= pow(2.0, d * 2.0);
  else if (d > 0.5) sizeMultiplier *= pow(2.0, (d - 0.5) * 2.0);
  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
  gl_PointSize = ( sizeMultiplier / -mvPosition.z );
  gl_Position = projectionMatrix * mvPosition;
}
`,z0=`
uniform sampler2D pointTexture;
varying vec3 vColor;

vec3 hsl2rgb(in vec3 c) {
    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );
    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));
}

vec3 rgb2hsl( in vec3 c ){
  float h = 0.0;
	float s = 0.0;
	float l = 0.0;
	float r = c.r;
	float g = c.g;
	float b = c.b;
	float cMin = min( r, min( g, b ) );
	float cMax = max( r, max( g, b ) );

	l = ( cMax + cMin ) / 2.0;
	if ( cMax > cMin ) {
		float cDelta = cMax - cMin;
		s = l < .0 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) );
        
		if ( r == cMax ) {
			h = ( g - b ) / cDelta;
		} else if ( g == cMax ) {
			h = 2.0 + ( b - r ) / cDelta;
		} else {
			h = 4.0 + ( r - g ) / cDelta;
		}

		if ( h < 0.0) {
			h += 6.0;
		}
		h = h / 6.0;
	}
	return vec3( h, s, l );
}

void main() {
  float lightness = texture2D(pointTexture, gl_PointCoord).r;
  vec3 color = rgb2hsl(vColor);
  color.z *= 2.0 * lightness * lightness * lightness;
  color = hsl2rgb(color);
  gl_FragColor = vec4(color, 1.0);
}
`,c=y0.map(x=>new l(x.x,x.y,x.z)),d=new l;for(const x of c)d.add(x);d.divideScalar(c.length);const C=new v;C.setFromPoints(c);class s0{constructor(){s(this,"renderer");s(this,"scene");s(this,"camera");s(this,"state");s(this,"controls");s(this,"lights");s(this,"accumulatedTime",0);s(this,"previousTime",-1);s(this,"recordedFrames",[]);s(this,"progressBar");s(this,"fpsControl");s(this,"recording",!1);s(this,"fps",25);s(this,"prerecorded",!1);s(this,"recordFinishCallback");s(this,"recordStartCallback");s(this,"recordStopCallback");this.progressBar=document.querySelector("#progressBar"),this.fpsControl=document.querySelector("#fpsLabel input"),this.fpsControl.oninput=()=>{const y=Number(this.fpsControl.value);!this.fpsControl.validity.valid||(this.fps=y,this.prerecorded&&this.resetState())};const e=document.querySelector("#mainCanvas");this.scene=new F,this.camera=new T(70,1,.01,100),this.camera.position.x=5,this.camera.position.z=d.z,this.camera.up.set(0,0,1),this.controls=new E(this.camera,e),this.controls.target.copy(d),this.createLights(),this.state={time:0,duration:60,coords:c.map(y=>new l(y.x,y.y,y.z)),colors:c.map(y=>new u(1,1,1)),init(){},update(){}},this.renderer=new N({canvas:e,antialias:!0}),this.renderer.setAnimationLoop(this.animation.bind(this));const t=()=>{const{width:y,height:r}=e.parentElement.getBoundingClientRect();this.renderer.setSize(y,r),this.camera.aspect=y/r,this.camera.updateProjectionMatrix()};t(),window.onresize=t}addEventListener(e,t){switch(e){case"record-finish":this.recordFinishCallback=t;break;case"record-start":this.recordStartCallback=t;break;case"record-stop":this.recordStopCallback=t;break}}startRecording(){var e;this.recording=!0,this.recordedFrames=[],this.accumulatedTime=0,this.resetState(),(e=this.recordStartCallback)==null||e.call(this)}stopRecording(){var e;this.recording=!1,(e=this.recordStopCallback)==null||e.call(this)}updateCode(e){try{new Function("app","N","COORDS","BBOX","Box2","Box3","Color","Cylindrical","Euler","Frustum","Interpolant","Line3","MathUtils","Matrix3","Matrix4","Plane","Quaternion","Ray","Sphere","Spherical","Triangle","Vector2","Vector3","Vector4",e)(this.state,this.state.colors.length,this.state.coords,C,P,v,u,B,R,A,D,O,U,$,j,q,I,V,_,G,Q,W,l,H),this.resetState(),this.prerecorded=!1}catch(t){console.error(t)}}playFrames(e){let t=0;this.state.init=()=>{this.state.duration=e.length/this.fps,t=0},this.state.update=()=>{for(let y=0;y<this.state.colors.length;y++)this.state.colors[y]=e[t].colors[y];t++,t===e.length&&(t=0)},this.resetState(),this.prerecorded=!0}animation(e){const t=1e3/this.fps,y=this.previousTime===-1,r=e-this.previousTime;if(this.previousTime=e,!y){for(this.accumulatedTime+=this.recording?5*r:r;this.accumulatedTime>=t;)this.accumulatedTime-=t,this.state.time+=t/1e3,this.state.time>=this.state.duration?(this.recording&&this.finishRecording(),this.resetState()):(this.updateState(),this.recording&&this.recordFrame());this.controls.update(),this.renderer.render(this.scene,this.camera)}}resetState(){this.state.time=0,this.state.init(),this.state.update()}updateState(){try{this.state.update()}catch(y){console.error(y),this.state.update=()=>{}}const e=this.lights.attributes.color,t=e.array;for(let y=0;y<this.state.colors.length;y++){const r=this.state.colors[y]||{r:0,g:0,b:0};t[y*3]=r.r||0,t[y*3+1]=r.g||0,t[y*3+2]=r.b||0}e.needsUpdate=!0,this.progressBar.style.width=`${this.state.time/this.state.duration*100}%`}finishRecording(){var e,t;this.recording=!1,(e=this.recordFinishCallback)==null||e.call(this,this.recordedFrames),(t=this.recordStopCallback)==null||t.call(this)}recordFrame(){this.recordedFrames.push({colors:this.state.colors.map(e=>e.clone())})}createLights(){const e=[],t=[],y=new Set;for(const o of c){const i=`${o.x}|${o.y}|${o.z}`;y.has(i)?e.push(0,0,-1e4):e.push(o.x,o.y,o.z),y.add(i),t.push(1,1,1)}const r=this.lights=new K;r.setAttribute("position",new b(e,3)),r.setAttribute("color",new b(t,3).setUsage(X));const z=new J(r,new Y({uniforms:{pointTexture:{value:new Z().load("/flare.png")}},vertexShader:x0,fragmentShader:z0,blending:e0,depthTest:!1,transparent:!0,vertexColors:!0}));this.scene.add(z)}}function o0(x,e=500){let t;return()=>{clearTimeout(t),t=setTimeout(x,e)}}class i0{constructor(){s(this,"data",[]);s(this,"result","")}setData(e){this.data=e}export(){this.writeHeader();for(let t=0;t<this.data.length;t++){const y=this.data[t].colors;let r=[];r.push(t);for(let z=0;z<y.length;z++)r.push(Math.round(y[z].r*255)),r.push(Math.round(y[z].g*255)),r.push(Math.round(y[z].b*255));t!==this.data.length-1&&(this.result+=r.join(",")+`
`)}const e=new Blob([this.result],{type:"text/plain"});return URL.createObjectURL(e)}writeHeader(){let e=[];e.push("FRAME_ID");for(let t=0;t<this.data[0].colors.length;t++)e.push(`R_${t}`),e.push(`G_${t}`),e.push(`B_${t}`);this.result+=e.join(",")+`
`}}class a0{constructor(){s(this,"file")}setFile(e){this.file=e}async import(){const e=await new Promise((t,y)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{y(r.error)},r.readAsText(this.file)});return this.parse(e)}parse(e){const t=e.split(/[\r\n]+/g);let y=!0,r=0;const z=[];for(let o=0;o<t.length;o++){if(t[o]==="")continue;const i=t[o].split(/,/g);if(!r)r=i.length;else if(r!==i.length)throw new Error("Invalid ");if(y&&(y=!1,i[0]==="FRAME_ID"))continue;let p={colors:[]};for(let n=1;n<i.length;n+=3){const m=Number(i[n]),f=Number(i[n+1]),g=Number(i[n+2]);if(Number.isNaN(m)||Number.isNaN(f)||Number.isNaN(g))throw new Error(`Invalid token(s) at line ${o} positions ${n}, ${n+1}, ${n+2}`);p.colors.push(new u(m/255,f/255,g/255))}z.push(p)}return z}}function n0(){return new Promise(x=>{const e=document.createElement("input");e.type="file",e.multiple=!1,e.onchange=()=>{var t;if(!((t=e.files)==null?void 0:t.length))return x(null);x(e.files[0])},e.click()})}function c0(x){const e=w.gzip(x);return btoa(String.fromCharCode(...e))}function l0(x){const e=atob(x),t=[];for(let r=0;;r++){const z=e.charCodeAt(r);if(Number.isNaN(z))break;t.push(z)}const y=new Uint8Array(t);return w.ungzip(y,{to:"string"})}const h=new r0,a=new s0;if(document.location.hash)try{const x=l0(document.location.hash.substr(1));h.setCode(x)}catch{const e=new URL(document.location.toString());e.hash="",document.location.replace(e)}a.updateCode(h.getCode());h.addEventListener("change",o0(()=>{const x=h.getCode(),e=new URL(document.location.toString());e.hash=c0(x),document.location.replace(e),a.updateCode(x)}));a.addEventListener("record-finish",x=>{const e=new i0;e.setData(x);const t=e.export(),y=document.querySelector("#download");y.href=t,y.removeAttribute("hidden"),y.download="export.csv"});a.addEventListener("record-start",()=>{document.querySelector("#recordingOverlay").removeAttribute("hidden")});a.addEventListener("record-stop",()=>{document.querySelector("#recordingOverlay").setAttribute("hidden","hidden")});function S(){a.startRecording()}async function d0(){const x=await n0();if(!x)return;const e=new a0;e.setFile(x);const t=await e.import();a.playFrames(t)}document.querySelector("#startExport").addEventListener("click",S);document.querySelector("#upload").addEventListener("click",d0);document.addEventListener("keydown",x=>{if(a.recording){x.key==="Escape"&&(x.preventDefault(),a.stopRecording());return}x.ctrlKey&&x.key==="e"&&(x.preventDefault(),S())});
